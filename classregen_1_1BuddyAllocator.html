<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>regen: regen::BuddyAllocator Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="regen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="icon-small.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">regen
   &#160;<span id="projectnumber">0.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>regen</b></li><li class="navelem"><a class="el" href="classregen_1_1BuddyAllocator.html">BuddyAllocator</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classregen_1_1BuddyAllocator-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">regen::BuddyAllocator Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Implements a variant of the buddy memory allocation algorithm for virtual memory allocation.  
 <a href="classregen_1_1BuddyAllocator.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="memory-allocator_8h_source.html">memory-allocator.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a7692775c92e3dd2ab7d5014ad9d40d70"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7692775c92e3dd2ab7d5014ad9d40d70"></a>
typedef unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classregen_1_1BuddyAllocator.html#a7692775c92e3dd2ab7d5014ad9d40d70">Reference</a></td></tr>
<tr class="memdesc:a7692775c92e3dd2ab7d5014ad9d40d70"><td class="mdescLeft">&#160;</td><td class="mdescRight">the virtual address. <br/></td></tr>
<tr class="separator:a7692775c92e3dd2ab7d5014ad9d40d70"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97157cc161005dcaf678a3b01d86f93b"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classregen_1_1BuddyAllocator.html#a97157cc161005dcaf678a3b01d86f93b">State</a> { <a class="el" href="classregen_1_1BuddyAllocator.html#a97157cc161005dcaf678a3b01d86f93ba97d4280c05c1360e44206f79fd5faf4d">FREE</a>, 
<a class="el" href="classregen_1_1BuddyAllocator.html#a97157cc161005dcaf678a3b01d86f93ba22dff73211064bbdda7250aa849d0d2f">FULL</a>, 
<a class="el" href="classregen_1_1BuddyAllocator.html#a97157cc161005dcaf678a3b01d86f93baf36f1719c96cf4a0fd72c251cbc56c50">PARTIAL</a>
 }</td></tr>
<tr class="separator:a97157cc161005dcaf678a3b01d86f93b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a6c188442a57473b0d68c4bd6788095f8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classregen_1_1BuddyAllocator.html#a6c188442a57473b0d68c4bd6788095f8">BuddyAllocator</a> (unsigned int <a class="el" href="classregen_1_1BuddyAllocator.html#ae5f29155f31b61b9f4d8f13be345a7ae">size</a>)</td></tr>
<tr class="separator:a6c188442a57473b0d68c4bd6788095f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00954d101e33b1b53bc623cf1a4bbd31"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classregen_1_1BuddyAllocator.html#a00954d101e33b1b53bc623cf1a4bbd31">alloc</a> (unsigned int <a class="el" href="classregen_1_1BuddyAllocator.html#ae5f29155f31b61b9f4d8f13be345a7ae">size</a>, unsigned int *addressRet)</td></tr>
<tr class="separator:a00954d101e33b1b53bc623cf1a4bbd31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d34cfff6f63b33dc9f9b06687ce3346"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classregen_1_1BuddyAllocator.html#a97157cc161005dcaf678a3b01d86f93b">State</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classregen_1_1BuddyAllocator.html#a4d34cfff6f63b33dc9f9b06687ce3346">allocaterState</a> () const </td></tr>
<tr class="separator:a4d34cfff6f63b33dc9f9b06687ce3346"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a112fe136eaaca51b7fd21d076c8e1322"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classregen_1_1BuddyAllocator.html#a112fe136eaaca51b7fd21d076c8e1322">clear</a> ()</td></tr>
<tr class="separator:a112fe136eaaca51b7fd21d076c8e1322"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1059874be41484f7206ae3ec9fdf9682"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classregen_1_1BuddyAllocator.html#a1059874be41484f7206ae3ec9fdf9682">free</a> (unsigned int address)</td></tr>
<tr class="separator:a1059874be41484f7206ae3ec9fdf9682"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acae456dc4db9781742d057819ea260ab"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classregen_1_1BuddyAllocator.html#acae456dc4db9781742d057819ea260ab">maxSpace</a> () const </td></tr>
<tr class="separator:acae456dc4db9781742d057819ea260ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5f29155f31b61b9f4d8f13be345a7ae"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classregen_1_1BuddyAllocator.html#ae5f29155f31b61b9f4d8f13be345a7ae">size</a> () const </td></tr>
<tr class="separator:ae5f29155f31b61b9f4d8f13be345a7ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Implements a variant of the buddy memory allocation algorithm for virtual memory allocation. </p>
<p>Dynamic memory allocation is not cheap. GPU memory is precious. For these reasons this class provides memory management with the intention to provide fast <a class="el" href="classregen_1_1BuddyAllocator.html#a00954d101e33b1b53bc623cf1a4bbd31">alloc()</a> and <a class="el" href="classregen_1_1BuddyAllocator.html#a1059874be41484f7206ae3ec9fdf9682">free()</a> functions and keeping the fragmentation in the memory as low as possible without moving any memory.</p>
<p>The algorithm uses a binary tree to partition the pre-allocated memory. When memory is allocated the algorithm searches for a <code>free</code> node that offers enough space for the request. The chosen node is cut in halves until half the node size does not fit the request anymore. Then the node is cut into one <code>full</code> node that fits the request exactly and another <code>free</code> node for the remaining space. No internal fragmentation occurs using this implementation. External fragmentation can happen when partitions are to small to fit allocation requests for a long time. Allocating some relative small chunks of memory helps in keeping the fragmentation costs low.</p>
<p>Addresses are only used relative to the start address within the allocator. If the allocated memory refers to any RAM you have to offset the pre-allocated data pointer with the relative addresses used within this class. </p>
</div><h2 class="groupheader">Member Enumeration Documentation</h2>
<a class="anchor" id="a97157cc161005dcaf678a3b01d86f93b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classregen_1_1BuddyAllocator.html#a97157cc161005dcaf678a3b01d86f93b">regen::BuddyAllocator::State</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The current allocator state. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><em><a class="anchor" id="a97157cc161005dcaf678a3b01d86f93ba97d4280c05c1360e44206f79fd5faf4d"></a>FREE</em>&nbsp;</td><td class="fielddoc">
<p>no allocate active </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a97157cc161005dcaf678a3b01d86f93ba22dff73211064bbdda7250aa849d0d2f"></a>FULL</em>&nbsp;</td><td class="fielddoc">
<p>no more allocate possible </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a97157cc161005dcaf678a3b01d86f93baf36f1719c96cf4a0fd72c251cbc56c50"></a>PARTIAL</em>&nbsp;</td><td class="fielddoc">
<p>some allocates active but space left </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a6c188442a57473b0d68c4bd6788095f8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BuddyAllocator::BuddyAllocator </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">size</td><td>number of pre-allocated bytes. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a00954d101e33b1b53bc623cf1a4bbd31"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool BuddyAllocator::alloc </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int *&#160;</td>
          <td class="paramname"><em>addressRet</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Allocate memory managed by the allocator. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">size</td><td>number of bytes to allocate. </td></tr>
    <tr><td class="paramname">addressRet</td><td>relative address of allocated memory </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>false if not enough space left. </dd></dl>

</div>
</div>
<a class="anchor" id="a4d34cfff6f63b33dc9f9b06687ce3346"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classregen_1_1BuddyAllocator.html#a97157cc161005dcaf678a3b01d86f93b">BuddyAllocator::State</a> BuddyAllocator::allocaterState </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>The current allocator state. </dd></dl>

</div>
</div>
<a class="anchor" id="a112fe136eaaca51b7fd21d076c8e1322"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BuddyAllocator::clear </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Clear this allocator. The allocator state will be FREE afterwards. </p>

</div>
</div>
<a class="anchor" id="a1059874be41484f7206ae3ec9fdf9682"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BuddyAllocator::free </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>address</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Free previously allocated memory. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">address</td><td>address of the memory block to free </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="acae456dc4db9781742d057819ea260ab"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int BuddyAllocator::maxSpace </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>maximum contiguous space that can be allocated. </dd></dl>

</div>
</div>
<a class="anchor" id="ae5f29155f31b61b9f4d8f13be345a7ae"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int BuddyAllocator::size </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>number of pre-allocated bytes. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>utility/<a class="el" href="memory-allocator_8h_source.html">memory-allocator.h</a></li>
<li>utility/memory-allocator.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Nov 7 2013 11:57:34 for regen by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
